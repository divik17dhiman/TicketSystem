{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Divik\\\\Downloads\\\\ticketsupportsystem\\\\frontend\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { useTickets } from '../context/TicketContext';\nimport TicketCard from '../components/tickets/TicketCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const {\n    tickets,\n    loading,\n    error,\n    fetchTickets\n  } = useTickets();\n  const [hasFetched, setHasFetched] = useState(false);\n\n  // Prevent multiple fetch calls\n  useEffect(() => {\n    if (user && !hasFetched) {\n      setHasFetched(true);\n      fetchTickets();\n    }\n  }, [user, fetchTickets, hasFetched]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        marginTop: '2rem',\n        color: 'var(--text-muted)'\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    style: {\n      maxWidth: 900,\n      margin: '2rem auto',\n      padding: '0 1rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        marginBottom: '2rem',\n        flexWrap: 'wrap',\n        gap: '1rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            fontSize: 28,\n            fontWeight: 700,\n            margin: 0\n          },\n          children: (user === null || user === void 0 ? void 0 : user.role) === 'agent' || (user === null || user === void 0 ? void 0 : user.role) === 'admin' ? 'Support Dashboard' : 'My Tickets'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'var(--text-muted)',\n            fontSize: 15\n          },\n          children: (user === null || user === void 0 ? void 0 : user.role) === 'customer' ? 'Track and manage your support requests' : 'Manage customer support tickets'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), (user === null || user === void 0 ? void 0 : user.role) === 'customer' && /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/tickets/new\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            fontWeight: 500,\n            background: 'var(--primary)',\n            color: '#fff',\n            border: 'none',\n            borderRadius: '8px',\n            padding: '0.7em 1.5em',\n            fontSize: 16,\n            cursor: 'pointer',\n            transition: 'background 0.18s'\n          },\n          children: \"+ New Ticket\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fdecea',\n        color: '#b71c1c',\n        padding: '1rem',\n        borderRadius: 8,\n        marginBottom: 20\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), tickets.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'var(--surface)',\n        borderRadius: 10,\n        boxShadow: 'var(--shadow)',\n        padding: '2rem',\n        textAlign: 'center',\n        marginTop: '1rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'var(--text-muted)',\n          marginBottom: 12\n        },\n        children: \"No tickets found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/tickets/new\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            background: 'var(--primary)',\n            color: '#fff',\n            border: 'none',\n            borderRadius: '8px',\n            padding: '0.7em 1.5em',\n            fontSize: 16,\n            cursor: 'pointer'\n          },\n          children: \"Create your first ticket\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 1fr))',\n        gap: '1.5rem',\n        marginTop: '1rem'\n      },\n      children: tickets.map(ticket => /*#__PURE__*/_jsxDEV(TicketCard, {\n        ticket: ticket\n      }, ticket._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"XnjhQIcuPFPTkewx5sJh0A8V3eM=\", false, function () {\n  return [useAuth, useTickets];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","Link","useAuth","useTickets","TicketCard","jsxDEV","_jsxDEV","Dashboard","_s","user","tickets","loading","error","fetchTickets","hasFetched","setHasFetched","style","textAlign","marginTop","color","children","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","margin","padding","display","alignItems","justifyContent","marginBottom","flexWrap","gap","fontSize","fontWeight","role","to","background","border","borderRadius","cursor","transition","length","boxShadow","gridTemplateColumns","map","ticket","_id","_c","$RefreshReg$"],"sources":["C:/Users/Divik/Downloads/ticketsupportsystem/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useTickets } from '../context/TicketContext';\r\nimport TicketCard from '../components/tickets/TicketCard';\r\n\r\nconst Dashboard = () => {\r\n  const { user } = useAuth();\r\n  const { tickets, loading, error, fetchTickets } = useTickets();\r\n  const [hasFetched, setHasFetched] = useState(false);\r\n\r\n  // Prevent multiple fetch calls\r\n  useEffect(() => {\r\n    if (user && !hasFetched) {\r\n      setHasFetched(true);\r\n      fetchTickets();\r\n    }\r\n  }, [user, fetchTickets, hasFetched]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ textAlign: 'center', marginTop: '2rem', color: 'var(--text-muted)' }}>\r\n        Loading...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main style={{ maxWidth: 900, margin: '2rem auto', padding: '0 1rem' }}>\r\n      <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        marginBottom: '2rem',\r\n        flexWrap: 'wrap',\r\n        gap: '1rem'\r\n      }}>\r\n        <div>\r\n          <h1 style={{ fontSize: 28, fontWeight: 700, margin: 0 }}>\r\n            {user?.role === 'agent' || user?.role === 'admin' ? 'Support Dashboard' : 'My Tickets'}\r\n          </h1>\r\n          <div style={{ color: 'var(--text-muted)', fontSize: 15 }}>\r\n            {user?.role === 'customer' \r\n              ? 'Track and manage your support requests'\r\n              : 'Manage customer support tickets'}\r\n          </div>\r\n        </div>\r\n        {user?.role === 'customer' && (\r\n          <Link to=\"/tickets/new\">\r\n            <button style={{\r\n              fontWeight: 500,\r\n              background: 'var(--primary)',\r\n              color: '#fff',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              padding: '0.7em 1.5em',\r\n              fontSize: 16,\r\n              cursor: 'pointer',\r\n              transition: 'background 0.18s'\r\n            }}>\r\n              + New Ticket\r\n            </button>\r\n          </Link>\r\n        )}\r\n      </div>\r\n      {error && (\r\n        <div style={{\r\n          background: '#fdecea',\r\n          color: '#b71c1c',\r\n          padding: '1rem',\r\n          borderRadius: 8,\r\n          marginBottom: 20\r\n        }}>\r\n          {error}\r\n        </div>\r\n      )}\r\n      {tickets.length === 0 ? (\r\n        <div style={{\r\n          background: 'var(--surface)',\r\n          borderRadius: 10,\r\n          boxShadow: 'var(--shadow)',\r\n          padding: '2rem',\r\n          textAlign: 'center',\r\n          marginTop: '1rem'\r\n        }}>\r\n          <div style={{ color: 'var(--text-muted)', marginBottom: 12 }}>\r\n            No tickets found.\r\n          </div>\r\n          <Link to=\"/tickets/new\">\r\n            <button style={{\r\n              background: 'var(--primary)',\r\n              color: '#fff',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              padding: '0.7em 1.5em',\r\n              fontSize: 16,\r\n              cursor: 'pointer'\r\n            }}>\r\n              Create your first ticket\r\n            </button>\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        <div style={{\r\n          display: 'grid',\r\n          gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 1fr))',\r\n          gap: '1.5rem',\r\n          marginTop: '1rem'\r\n        }}>\r\n          {tickets.map(ticket => (\r\n            <TicketCard key={ticket._id} ticket={ticket} />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n};\r\n\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}