{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Divik\\\\Downloads\\\\ticketsupportsystem\\\\frontend\\\\src\\\\components\\\\ImageUpload.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport ApiService from '../services/api';\nimport ImageModal from './ImageModal';\nimport { getImageUrl } from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImageUpload = ({\n  onImagesUploaded,\n  multiple = false,\n  existingImages = []\n}) => {\n  _s();\n  const [uploading, setUploading] = useState(false);\n  const [uploadedImages, setUploadedImages] = useState(existingImages);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [modalCurrentIndex, setModalCurrentIndex] = useState(0);\n  const handleFileChange = async e => {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n    setUploading(true);\n    try {\n      let uploadedData;\n      if (multiple && files.length > 1) {\n        uploadedData = await ApiService.uploadImages(files);\n      } else {\n        uploadedData = await ApiService.uploadImage(files[0]);\n        uploadedData = [uploadedData]; // Normalize to array\n      }\n      const newImages = [...uploadedImages, ...uploadedData];\n      setUploadedImages(newImages);\n      onImagesUploaded(newImages);\n    } catch (error) {\n      console.error('Upload failed:', error);\n      alert('Failed to upload image(s): ' + error.message);\n    } finally {\n      setUploading(false);\n    }\n  };\n  const removeImage = index => {\n    const newImages = uploadedImages.filter((_, i) => i !== index);\n    setUploadedImages(newImages);\n    onImagesUploaded(newImages);\n  };\n  const openImageModal = index => {\n    setModalCurrentIndex(index);\n    setIsModalOpen(true);\n  };\n  const closeImageModal = () => {\n    setIsModalOpen(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"image-upload\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [multiple ? 'Upload Images (max 5)' : 'Upload Image', /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          multiple: multiple,\n          onChange: handleFileChange,\n          disabled: uploading,\n          style: {\n            marginTop: '0.5rem'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), uploading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Uploading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), uploadedImages.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"uploaded-images\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Uploaded Images:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fill, minmax(150px, 1fr))',\n          gap: '1rem'\n        },\n        children: uploadedImages.map((image, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'relative'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: getImageUrl(image.url),\n            alt: image.originalName,\n            onClick: () => openImageModal(index),\n            style: {\n              width: '100%',\n              height: '100px',\n              objectFit: 'cover',\n              borderRadius: '4px',\n              border: '1px solid #ddd',\n              cursor: 'pointer',\n              transition: 'transform 0.2s, box-shadow 0.2s'\n            },\n            onMouseEnter: e => {\n              e.target.style.transform = 'scale(1.05)';\n              e.target.style.boxShadow = '0 4px 8px rgba(0,0,0,0.2)';\n            },\n            onMouseLeave: e => {\n              e.target.style.transform = 'scale(1)';\n              e.target.style.boxShadow = 'none';\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: e => {\n              e.stopPropagation();\n              removeImage(index);\n            },\n            style: {\n              position: 'absolute',\n              top: '5px',\n              right: '5px',\n              background: '#e74c3c',\n              color: 'white',\n              border: 'none',\n              borderRadius: '50%',\n              width: '20px',\n              height: '20px',\n              cursor: 'pointer',\n              fontSize: '12px'\n            },\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ImageModal, {\n      images: uploadedImages,\n      currentIndex: modalCurrentIndex,\n      isOpen: isModalOpen,\n      onClose: closeImageModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(ImageUpload, \"NIlkJ2vwbdCPY8188MUCFIVawBE=\");\n_c = ImageUpload;\nexport default ImageUpload;\nvar _c;\n$RefreshReg$(_c, \"ImageUpload\");","map":{"version":3,"names":["React","useState","ApiService","ImageModal","getImageUrl","jsxDEV","_jsxDEV","ImageUpload","onImagesUploaded","multiple","existingImages","_s","uploading","setUploading","uploadedImages","setUploadedImages","isModalOpen","setIsModalOpen","modalCurrentIndex","setModalCurrentIndex","handleFileChange","e","files","Array","from","target","length","uploadedData","uploadImages","uploadImage","newImages","error","console","alert","message","removeImage","index","filter","_","i","openImageModal","closeImageModal","className","children","type","accept","onChange","disabled","style","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","display","gridTemplateColumns","gap","map","image","position","src","url","alt","originalName","onClick","width","height","objectFit","borderRadius","border","cursor","transition","onMouseEnter","transform","boxShadow","onMouseLeave","stopPropagation","top","right","background","color","fontSize","images","currentIndex","isOpen","onClose","_c","$RefreshReg$"],"sources":["C:/Users/Divik/Downloads/ticketsupportsystem/frontend/src/components/ImageUpload.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport ApiService from '../services/api';\r\nimport ImageModal from './ImageModal';\r\nimport { getImageUrl } from '../utils/api';\r\n\r\nconst ImageUpload = ({ onImagesUploaded, multiple = false, existingImages = [] }) => {\r\n  const [uploading, setUploading] = useState(false);\r\n  const [uploadedImages, setUploadedImages] = useState(existingImages);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [modalCurrentIndex, setModalCurrentIndex] = useState(0);\r\n\r\n  const handleFileChange = async (e) => {\r\n    const files = Array.from(e.target.files);\r\n    if (files.length === 0) return;\r\n\r\n    setUploading(true);\r\n    try {\r\n      let uploadedData;\r\n      if (multiple && files.length > 1) {\r\n        uploadedData = await ApiService.uploadImages(files);\r\n      } else {\r\n        uploadedData = await ApiService.uploadImage(files[0]);\r\n        uploadedData = [uploadedData]; // Normalize to array\r\n      }\r\n\r\n      const newImages = [...uploadedImages, ...uploadedData];\r\n      setUploadedImages(newImages);\r\n      onImagesUploaded(newImages);\r\n    } catch (error) {\r\n      console.error('Upload failed:', error);\r\n      alert('Failed to upload image(s): ' + error.message);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const removeImage = (index) => {\r\n    const newImages = uploadedImages.filter((_, i) => i !== index);\r\n    setUploadedImages(newImages);\r\n    onImagesUploaded(newImages);\r\n  };\r\n\r\n  const openImageModal = (index) => {\r\n    setModalCurrentIndex(index);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const closeImageModal = () => {\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"image-upload\">\r\n      <div className=\"form-group\">\r\n        <label>\r\n          {multiple ? 'Upload Images (max 5)' : 'Upload Image'}\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            multiple={multiple}\r\n            onChange={handleFileChange}\r\n            disabled={uploading}\r\n            style={{ marginTop: '0.5rem' }}\r\n          />\r\n        </label>\r\n        {uploading && <p>Uploading...</p>}\r\n      </div>\r\n\r\n      {uploadedImages.length > 0 && (\r\n        <div className=\"uploaded-images\">\r\n          <h4>Uploaded Images:</h4>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(150px, 1fr))', gap: '1rem' }}>\r\n            {uploadedImages.map((image, index) => (\r\n              <div key={index} style={{ position: 'relative' }}>\r\n                <img\r\n                  src={getImageUrl(image.url)}\r\n                  alt={image.originalName}\r\n                  onClick={() => openImageModal(index)}\r\n                  style={{\r\n                    width: '100%',\r\n                    height: '100px',\r\n                    objectFit: 'cover',\r\n                    borderRadius: '4px',\r\n                    border: '1px solid #ddd',\r\n                    cursor: 'pointer',\r\n                    transition: 'transform 0.2s, box-shadow 0.2s'\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.target.style.transform = 'scale(1.05)';\r\n                    e.target.style.boxShadow = '0 4px 8px rgba(0,0,0,0.2)';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.target.style.transform = 'scale(1)';\r\n                    e.target.style.boxShadow = 'none';\r\n                  }}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    removeImage(index);\r\n                  }}\r\n                  style={{\r\n                    position: 'absolute',\r\n                    top: '5px',\r\n                    right: '5px',\r\n                    background: '#e74c3c',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '50%',\r\n                    width: '20px',\r\n                    height: '20px',\r\n                    cursor: 'pointer',\r\n                    fontSize: '12px'\r\n                  }}\r\n                >\r\n                  Ã—\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Image Modal */}\r\n      <ImageModal\r\n        images={uploadedImages}\r\n        currentIndex={modalCurrentIndex}\r\n        isOpen={isModalOpen}\r\n        onClose={closeImageModal}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUpload;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}